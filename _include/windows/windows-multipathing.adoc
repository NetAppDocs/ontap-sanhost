== Step 4: Confirm the multipath configuration for your host

Install Microsoft Multipath I/O (MPIO) software and enable multipathing if your Windows host has more than one path to the storage system.

The MPIO software presents a single disk to the Windows OS for all paths, and a device-specific module (DSM) manages path failover. On a Windows system, the two main components in an MPIO solution are the DSM and the Windows MPIO.

CAUTION: If you don't install the MPIO software, the Windows OS might see each path as a separate disk. This can lead to data corruption. 

NOTE: Windows XP or Windows Vista running in a Hyper-V virtual machine doesn't support MPIO.

.Steps

. Install the MPIO software and enable multipathing. 

. When you select MPIO on systems using FC, the Host Utilities installer sets the required timeout values for Emulex and QLogic FC HBAs.
+
[role="tabbed-block"]
====
.Emulex FC
--
The timeout values for Emulex FC HBAs:

[cols=2*,options="header"]
|===
| Property type
| Property value
| LinkTimeOut | 1
| NodeTimeOut | 10
|===
--
.QLogic FC
--
The timeout values for QLogic FC HBAs:

[cols=2*,options="header"]
|===
| Property type
| Property value
| LinkDownTimeOut | 1
| PortDownRetryCount | 10
|===
--
====

. Verify the path status for your ONTAP LUNs:
+
Depending on your SAN configuration, the host uses ASA, AFF, or FAS configurations to access ONTAP LUNs. In both configurations, you shouldn't require more than four paths to access a single ONTAP LUN. If there are more than four paths, it might cause issues with the paths during a storage failure.
+
The following example outputs show the correct settings for ONTAP LUNs for an ASA, AFF, or FAS configuration.
+
[role="tabbed-block"]
====
.ASA configuration
--
An ASA configuration should have one group of Active/Optimized paths with single priorities. This means the paths are serviced by the controller and the I/O is sent on all the active paths.

image::asa.png[Screenshot of ONTAP LUN with active/optimized paths]
--

.AFF or FAS configuration
--
An AFF or FAS configuration should have two groups of paths with different priorities. The paths with higher priorities are Active/Optimized. This means the Active/Optimized paths are serviced by the controller where the aggregate is located. The paths with lower priorities are active but non-optimized because they are served from a different controller. The non-optimized paths are only used when optimized paths aren't available.

image::nonasa.png[Screenshot of an ONTAP LUN with two active/optimized paths and two active/non-optimized paths]
--
====