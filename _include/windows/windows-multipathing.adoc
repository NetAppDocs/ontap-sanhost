== Step 4: Confirm the multipath configuration for your host

If your Windows host has more than one path to the storage system, you need to enable multipahting.

.Steps

. Install the Microsoft Multipath I/O (MPIO) software and enable multipathing  
+
The MPIO software presents a single disk to the Windows OS for all paths, and a device-specific module (DSM) manages path failover. On a Windows system, the two main components in any MPIO solution are the DSM and the Windows MPIO.
+
CAUTION: If you don't install the MPIO software, the Windows OS might see each path as a separate disk. This can lead to data corruption. 
+
NOTE: Windows XP or Windows Vista running in a Hyper-V virtual machine doesn't support MPIO.

. When you select MPIO on systems using FC, the Host Utilities installer sets the required timeout values for Emulex and QLogic FC HBAs.
+
[role="tabbed-block"]
====
.Emulex FC
--
The timeout values for Emulex FC HBAs:

[cols=2*,options="header"]
|===
| Property type
| Property value
| LinkTimeOut | 1
| NodeTimeOut | 10
|===
--
.QLogic FC
--
The timeout values for QLogic FC HBAs:

[cols=2*,options="header"]
|===
| Property type
| Property value
| LinkDownTimeOut | 1
| PortDownRetryCount | 10
|===
--
====
+
NOTE: For more information on the recommended settings, see link:hu_wuhu_hba_settings.html[Configure registry settings for Windows Host Utilities].

. Verify the settings for your ONTAP LUNs.
+
Depending on your SAN configuration, the host uses ASA or non-ASA configurations to access ONTAP LUNs. In both configurations, you shouldn't require more than four paths to access a single ONTAP LUN. If there are more than four paths, it might cause issues with the paths during a storage failure.
+
The following example outputs show the correct settings for ONTAP LUNs for an ASA and non-ASA configuration.
+
[role="tabbed-block"]
====
.ASA configuration
--
An ASA configuration should have one group of Active/Optimized paths with single priorities. This means the paths are serviced by the controller and the I/O is sent on all the active paths.

image::asa.png[Screenshot of ONTAP LUN with active/optimized paths]
--

.Non-ASA configuration
--
A non-ASA configuration should have two groups of paths with different priorities. The paths with higher priorities are Active/Optimized. This means the Active/Optimized paths are serviced by the controller where the aggregate is located. The paths with lower priorities are active but non-optimized because they are served from a different controller. The non-optimized paths are only used when optimized paths aren't available.

image::nonasa.png[Screenshot of an ONTAP LUN with two active/optimized paths and two active/non-optimized paths]
--
====